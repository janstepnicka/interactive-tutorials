Генераторы очень легко реализовать, но немного сложно понять.

Генераторы используются для создания итераторов, но с другим подходом. Генераторы — это простые функции, которые возвращают итерируемый набор элементов, по одному за раз, особым образом.

Когда итерация по набору элементов начинается с использованием оператора for, запускается генератор. Как только код функции генератора достигает оператора "yield", генератор передает выполнение обратно в цикл for, возвращая новое значение из набора. Функция генератора может генерировать столько значений (возможно, бесконечно), сколько захочет, передавая их по одному за раз.

Вот простой пример функции генератора, которая возвращает 7 случайных целых чисел:

      import random
      
      def lottery():
          # возвращает 6 чисел от 1 до 40
          for i in range(6):
              yield random.randint(1, 40)
      
          # возвращает 7-е число от 1 до 15
          yield random.randint(1, 15)
      
      for random_number in lottery():
             print("И следующий номер... %d!" %(random_number))

Эта функция самостоятельно решает, как генерировать случайные числа, и выполняет операторы yield один за другим, приостанавливаясь между вызовами, чтобы вернуть выполнение в основной цикл for.

Упражнение
--------

Напишите функцию-генератор, которая возвращает ряд Фибоначчи. Они вычисляются по следующей формуле: первые два числа ряда всегда равны 1, а каждое последующее число равно сумме двух предыдущих чисел. Подсказка: можете ли вы использовать только две переменные в функции-генераторе? Помните, что присваивания можно выполнять одновременно. Код

    a = 1
    b = 2
    a, b = b, a
    print(a, b)

одновременно поменяет значения a и b местами.