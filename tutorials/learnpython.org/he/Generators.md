מחוללים הם קלים מאוד ליישום, אך מעט קשה להבין.

מחוללים משמשים ליצירת איטרטורים, אך בגישה שונה. מחוללים הם פונקציות פשוטות שמחזירות מערך איטרבילי של פריטים, אחד בכל פעם, בצורה מיוחדת.

כאשר מתחילה איטרציה על מערך פריטים באמצעות הצהרת for, המחולל מופעל. ברגע שקוד פונקציית המחולל מגיע להצהרת "yield", המחולל מחזיר את הביצוע ללולאת ה-for, מחזיר ערך חדש ממערך הפריטים. פונקציית המחולל יכולה להפיק כמה ערכים שהיא רוצה (אולי אינסופיים), ומחזירה כל אחד בתורו.

הנה דוגמה פשוטה של ​​פונקציית מחולל שמחזירה 7 שלמים אקראיים:

      import random
      
      def lottery():
          # מחזיר 6 מספרים בין 1 ל-40
          for i in range(6):
              yield random.randint(1, 40)
      
          # מחזיר מספר שביעי בין 1 ל-15
          yield random.randint(1, 15)
      
      for random_number in lottery():
             print("And the next number is... %d!" %(random_number))

פונקציה זו מחליטה כיצד לייצר את המספרים האקראיים בעצמה, ומבצעת את הצהרות ה-yield אחת אחר השנייה, עוצרת ביניהן כדי להחזיר את הביצוע ללולאת for הראשית.

תרגיל
--------

כתוב פונקציית מחולל שמחזירה את סדרת פיבונאצ'י. הם מחושבים באמצעות הנוסחה הבאה: שני המספרים הראשונים של הסדרה הם תמיד שווים ל-1, וכל מספר עוקב שמוחזר הוא סכום של שני המספרים האחרונים.
רמז: האם תוכל להשתמש רק בשתי משתנים בפונקציית המחולל? זכור שניתן לבצע הקצאות בו זמנית. הקוד

    a = 1
    b = 2
    a, b = b, a
    print(a, b)

יחליף בו זמנית את הערכים של a ו-b.